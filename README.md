Iterative Ensemble Smoother
===========================

[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)
[![docs](https://readthedocs.org/projects/iterative_ensemble_smoother/badge/?version=latest&style=plastic)](https://iterative-ensemble-smoother.readthedocs.io/)

## About

**iterative_ensemble_smoother** is a Python package that implements the subspace iterative ensemble smoother as described in [evensen2019](https://www.frontiersin.org/articles/10.3389/fams.2019.00047/full).
This algorithm is particularly effective for problems with a large number of parameters (e.g., millions) and a few realizations or samples (e.g., hundreds).

## Installation

**iterative_ensemble_smoother** is on PyPi and can be installed using pip:

```text
pip install iterative_ensemble_smoother
```

## Usage

The following illustrates usage but does not actually create the inputs and can not be run.

The example below illustrates the usage of the package.
Note that it does not create the necessary inputs and cannot be run directly.
For complete information and runnable examples, please refer to [the documentation](http://iterative_ensemble_smoother.rtfd.io).

```python
import iterative_ensemble_smoother as ies

# `prior` is a matrix of size (num_params, ensemble_size).
# In geostatistical applications, it typically consists of Gaussian random fields
# that model rock properties like porosities and permeabilities.

# `response_ensemble` is a matrix of size (num_obs, ensemble_size) and is
# generated by running a dynamical model, such as a flow simulator.
# In geostatistical applications, this is typically a porous flow simulator like Eclipse or OPM flow.

# `obs_errors` and `obs_values` are 1D array of size `num_obs` that hold observations from real-life
# sensors and their uncertainty specifications.
# In geostatistical applications, the observations are typically pressures, temperatures, production rates etc.

smoother = ies.ES()
smoother.fit(response_ensemble, obs_errors, obs_values)
posterior = smoother.update(prior)
```

## Building from source

To build **iterative_ensemble_smoother** from source:

```bash
git clone https://github.com/equinor/iterative_ensemble_smoother.git
cd iterative_ensemble_smoother
pip install .
```

### Building the documentation

```bash
apt install pandoc # Pandoc is required to build the documentation.
pip install .[doc]
spinx-build -c docs/source/ -b html docs/source/ docs/build/html/
```
